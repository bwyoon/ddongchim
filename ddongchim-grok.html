<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë˜¥ì¹¨ ê²Œì„</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        #game-container {
            position: relative;
            width: 600px;
            height: 800px;
            background-color: #fff;
            border: 2px solid #000;
            overflow: hidden;
        }
        #butt {
            position: absolute;
            top: 50px;
            left: 250px;
            width: 100px;
            height: 100px;
            background-color: #ffcc99;
            border-radius: 50%;
            text-align: center;
            line-height: 100px;
            font-size: 20px;
        }
        #hand {
            position: absolute;
            bottom: 50px;
            left: 250px;
            width: 50px;
            height: 50px;
            background-color: #ff9999;
            text-align: center;
            line-height: 50px;
            font-size: 20px;
        }
        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
        }
        #time {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
        }
        #difficulty {
            position: absolute;
            bottom: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="butt">ğŸ‘</div>
        <div id="hand">ğŸ‘†</div>
        <div id="score">ì ìˆ˜: 0</div>
        <div id="time">ì‹œê°„: 60</div>
        <div id="difficulty">
            <label>ë‚œì´ë„:</label>
            <select id="diff-select">
                <option value="1">ì‰¬ì›€</option>
                <option value="2" selected>ë³´í†µ</option>
                <option value="3">ì–´ë ¤ì›€</option>
            </select>
            <button id="start-btn">ì‹œì‘</button>
        </div>
    </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const butt = document.getElementById('butt');
        const hand = document.getElementById('hand');
        const scoreDisplay = document.getElementById('score');
        const timeDisplay = document.getElementById('time');
        const diffSelect = document.getElementById('diff-select');
        const startBtn = document.getElementById('start-btn');

        let score = 0;
        let timeLeft = 60;
        let buttSpeed = 2; // ê¸°ë³¸ ë³´í†µ ë‚œì´ë„
        let buttDirection = 1; // 1: ì˜¤ë¥¸ìª½, -1: ì™¼ìª½
        let handPosition = 250;
        let isAttacking = false;
        let gameInterval;
        let timerInterval;
        let isGameRunning = false;

        // ë‚œì´ë„ ì„¤ì •
        function setDifficulty() {
            const diff = parseInt(diffSelect.value);
            switch (diff) {
                case 1: buttSpeed = 1; break; // ì‰¬ì›€
                case 2: buttSpeed = 2; break; // ë³´í†µ
                case 3: buttSpeed = 3; break; // ì–´ë ¤ì›€
            }
        }

        // ê²Œì„ ì‹œì‘
        function startGame() {
            if (isGameRunning) return;
            setDifficulty();
            score = 0;
            timeLeft = 60;
            handPosition = 250;
            butt.style.left = '250px';
            buttDirection = 1;
            updateScore();
            updateTime();
            isGameRunning = true;
            gameInterval = setInterval(updateGame, 16); // ì•½ 60fps
            timerInterval = setInterval(updateTimer, 1000);
            startBtn.disabled = true;
        }

        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            timeLeft--;
            updateTime();
            if (timeLeft <= 0) {
                endGame();
            }
        }

        // ê²Œì„ ì—…ë°ì´íŠ¸
        function updateGame() {
            // ì—‰ë©ì´ ì›€ì§ì„
            let buttLeft = parseInt(butt.style.left);
            buttLeft += buttSpeed * buttDirection;
            if (buttLeft <= 0 || buttLeft >= 500) {
                buttDirection *= -1; // ë°©í–¥ ë°˜ì „
            }
            butt.style.left = buttLeft + 'px';

            // ì† ì›€ì§ì„ (ê³µê²© ì¤‘ ì•„ë‹˜)
            if (!isAttacking) {
                hand.style.left = handPosition + 'px';
            }
        }

        // ê³µê²© ë¡œì§
        function attack() {
            if (isAttacking || !isGameRunning) return;
            isAttacking = true;
            const startY = parseInt(hand.style.bottom);
            const targetY = parseInt(butt.style.top) + 100; // ì—‰ë©ì´ ì•„ë˜ìª½ ê°€ì •
            hand.style.transition = 'bottom 0.2s linear';
            hand.style.bottom = targetY + 'px';

            setTimeout(() => {
                checkHit();
                // ëŒì•„ì˜¤ê¸°
                hand.style.transition = 'bottom 0.2s linear';
                hand.style.bottom = '50px';
                setTimeout(() => {
                    isAttacking = false;
                    hand.style.transition = '';
                }, 200);
            }, 200);
        }

        // íˆíŠ¸ ì²´í¬
        function checkHit() {
            const handLeft = parseInt(hand.style.left);
            const buttLeft = parseInt(butt.style.left);
            const handWidth = 50;
            const buttWidth = 100;

            // ì†ê°€ë½ì´ ì—‰ë©ì´ ë²”ìœ„ ì•ˆì— ìˆëŠ”ì§€ (ì¤‘ì•™ í•­ë¬¸ ê°€ì •)
            const buttCenter = buttLeft + buttWidth / 2;
            const handCenter = handLeft + handWidth / 2;
            if (Math.abs(handCenter - buttCenter) < 20) { // 20px ì´ë‚´ íˆíŠ¸
                score += 1;
            } else {
                score -= 1;
            }
            updateScore();
        }

        // ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateScore() {
            scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
        }

        // ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateTime() {
            timeDisplay.textContent = `ì‹œê°„: ${timeLeft}`;
        }

        // ê²Œì„ ì¢…ë£Œ
        function endGame() {
            clearInterval(gameInterval);
            clearInterval(timerInterval);
            isGameRunning = false;
            startBtn.disabled = false;
            alert(`ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}`);
        }

        // í‚¤ ì…ë ¥ ì²˜ë¦¬
        document.addEventListener('keydown', (e) => {
            if (!isGameRunning) return;
            if (e.key === 'ArrowLeft' && handPosition > 0) {
                handPosition -= 10;
            } else if (e.key === 'ArrowRight' && handPosition < 550) {
                handPosition += 10;
            } else if (e.key === ' ') {
                attack();
            }
        });

        startBtn.addEventListener('click', startGame);
    </script>
</body>
</html>