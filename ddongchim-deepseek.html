<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>똥침 게임</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ffcccc, #ccffcc);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .game-container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: #4a4a4a;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            background-color: #f1f8ff;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-box {
            flex: 1;
            padding: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
        }

        .stat-label {
            font-size: 1rem;
            color: #555;
        }

        .game-area {
            position: relative;
            height: 400px;
            background: linear-gradient(to bottom, #e6f7ff, #b3e0ff);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 5px solid #4a9eff;
        }

        .butt {
            position: absolute;
            width: 80px;
            height: 60px;
            background-color: #ffcc99;
            border-radius: 50% 50% 40% 40%;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            transition: left 0.3s ease, top 0.3s ease;
            box-shadow: inset 0 -10px 0 rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .butt-hole {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #663300;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 11;
        }

        .finger {
            position: absolute;
            width: 20px;
            height: 60px;
            background: linear-gradient(to bottom, #ffcc99, #cc9966);
            border-radius: 10px 10px 0 0;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            transition: left 0.2s ease, bottom 0.2s ease;
            z-index: 20;
        }

        .finger-tip {
            position: absolute;
            width: 20px;
            height: 15px;
            background-color: #ff9966;
            border-radius: 50% 50% 0 0;
            top: -10px;
            left: 0;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            background-color: #4a9eff;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #2a7acc;
        }

        .control-btn:hover {
            background-color: #3a8eff;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #2a7acc;
        }

        .control-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .instructions {
            background-color: #fff9e6;
            padding: 15px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: left;
        }

        .instructions h3 {
            color: #ff9900;
            margin-bottom: 10px;
        }

        .instructions ul {
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .difficulty {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .difficulty-btn {
            padding: 8px 15px;
            background-color: #ffcc00;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .difficulty-btn.active {
            background-color: #ff9900;
            color: white;
            transform: scale(1.1);
        }

        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 2rem;
            z-index: 30;
            display: none;
            text-align: center;
        }

        .score-effect {
            position: absolute;
            font-size: 2rem;
            font-weight: bold;
            z-index: 25;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-100px); }
        }

        @keyframes jab {
            0% { bottom: 20px; }
            50% { bottom: 300px; }
            100% { bottom: 20px; }
        }

        .jabbing {
            animation: jab 0.4s ease-in-out;
        }

        .game-over {
            text-align: center;
            padding: 20px;
            display: none;
        }

        .final-score {
            font-size: 3rem;
            color: #ff6b6b;
            margin: 20px 0;
        }

        .restart-btn {
            padding: 15px 30px;
            font-size: 1.2rem;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .restart-btn:hover {
            background-color: #ff5252;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>똥침 게임</h1>
        <p class="subtitle">상대방의 움직이는 엉덩이를 똥침으로 공격하세요!</p>
        
        <div class="game-stats">
            <div class="stat-box">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">득점</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="time">30</div>
                <div class="stat-label">남은 시간</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="misses">0</div>
                <div class="stat-label">실점</div>
            </div>
        </div>
        
        <div class="difficulty">
            <button class="difficulty-btn active" data-level="easy">쉬움</button>
            <button class="difficulty-btn" data-level="normal">보통</button>
            <button class="difficulty-btn" data-level="hard">어려움</button>
        </div>
        
        <div class="game-area" id="gameArea">
            <div class="butt" id="butt">
                <div class="butt-hole"></div>
            </div>
            <div class="finger" id="finger">
                <div class="finger-tip"></div>
            </div>
            <div class="message" id="message"></div>
        </div>
        
        <div class="controls">
            <button class="control-btn" id="leftBtn">
                <i class="fas fa-arrow-left"></i> 왼쪽 이동
            </button>
            <button class="control-btn" id="jabBtn">
                <i class="fas fa-hand-point-up"></i> 똥침! (스페이스바)
            </button>
            <button class="control-btn" id="rightBtn">
                오른쪽 이동 <i class="fas fa-arrow-right"></i>
            </button>
        </div>
        
        <div class="instructions">
            <h3>게임 방법</h3>
            <ul>
                <li><strong>좌우 이동</strong>: 왼쪽/오른쪽 방향키 또는 버튼을 사용해 손가락을 움직입니다.</li>
                <li><strong>똥침 공격</strong>: 스페이스바 또는 "똥침!" 버튼을 눌러 손가락을 위로 찌릅니다.</li>
                <li><strong>득점 조건</strong>: 손가락이 엉덩이의 항문에 정확히 맞으면 득점합니다.</li>
                <li><strong>실점 조건</strong>: 엉덩이를 놓치면 실점합니다.</li>
                <li><strong>난이도</strong>: 엉덩이의 움직임 속도로 조절할 수 있습니다.</li>
                <li><strong>게임 시간</strong>: 30초 동안 진행됩니다.</li>
            </ul>
        </div>
        
        <div class="game-over" id="gameOver">
            <h2>게임 종료!</h2>
            <div class="final-score" id="finalScore">0점</div>
            <p>당신의 점수는 <span id="finalScoreText">0</span>점 입니다!</p>
            <button class="restart-btn" id="restartBtn">다시 시작하기</button>
        </div>
    </div>

    <script>
        // 게임 요소 가져오기
        const gameArea = document.getElementById('gameArea');
        const butt = document.getElementById('butt');
        const finger = document.getElementById('finger');
        const message = document.getElementById('message');
        const scoreElement = document.getElementById('score');
        const timeElement = document.getElementById('time');
        const missesElement = document.getElementById('misses');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const jabBtn = document.getElementById('jabBtn');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScore = document.getElementById('finalScore');
        const finalScoreText = document.getElementById('finalScoreText');
        const restartBtn = document.getElementById('restartBtn');
        
        // 게임 변수
        let score = 0;
        let misses = 0;
        let timeLeft = 30;
        let gameActive = true;
        let isJabbing = false;
        let buttDirection = 1; // 1: 오른쪽, -1: 왼쪽
        let buttSpeed = 2; // 기본 속도
        let gameTimer;
        let buttMoveTimer;
        let fingerPosition = 50; // 손가락 위치 (%)
        
        // 난이도 설정
        const difficultySettings = {
            easy: { speed: 1.5, color: '#4CAF50' },
            normal: { speed: 2, color: '#FF9800' },
            hard: { speed: 3, color: '#F44336' }
        };
        
        let currentDifficulty = 'normal';
        
        // 엉덩이 움직임 함수
        function moveButt() {
            if (!gameActive) return;
            
            const gameAreaWidth = gameArea.clientWidth;
            const buttWidth = butt.clientWidth;
            const buttLeft = parseInt(butt.style.left) || gameAreaWidth / 2;
            
            // 엉덩이의 새로운 위치 계산
            let newLeft = buttLeft + (buttSpeed * buttDirection);
            
            // 경계 체크 및 방향 전환
            if (newLeft <= 0) {
                newLeft = 0;
                buttDirection = 1;
            } else if (newLeft >= gameAreaWidth - buttWidth) {
                newLeft = gameAreaWidth - buttWidth;
                buttDirection = -1;
            }
            
            // 엉덩이 위치 업데이트
            butt.style.left = `${newLeft}px`;
            
            // 엉덩이의 Y축 움직임 추가 (약간 위아래로 움직임)
            const buttTop = 50 + Math.sin(Date.now() / 500) * 10; // 50px 기준으로 ±10px 움직임
            butt.style.top = `${buttTop}px`;
        }
        
        // 손가락 움직임 함수
        function moveFinger(direction) {
            if (!gameActive || isJabbing) return;
            
            const gameAreaWidth = gameArea.clientWidth;
            const fingerWidth = finger.clientWidth;
            
            // 손가락 위치 업데이트
            if (direction === 'left') {
                fingerPosition = Math.max(0, fingerPosition - 5);
            } else if (direction === 'right') {
                fingerPosition = Math.min(100, fingerPosition + 5);
            }
            
            // 손가락 위치 계산 (퍼센트를 px로 변환)
            const fingerLeft = (gameAreaWidth - fingerWidth) * (fingerPosition / 100);
            finger.style.left = `${fingerLeft}px`;
        }
        
        // 똥침 공격 함수
        function jabFinger() {
            if (!gameActive || isJabbing) return;
            
            isJabbing = true;
            finger.classList.add('jabbing');
            
            // 0.2초 후에 충돌 체크
            setTimeout(() => {
                checkCollision();
                
                // 0.2초 후에 손가락 원래 위치로 복귀
                setTimeout(() => {
                    finger.classList.remove('jabbing');
                    isJabbing = false;
                }, 200);
            }, 200);
        }
        
        // 충돌 체크 함수
        function checkCollision() {
            const fingerRect = finger.getBoundingClientRect();
            const buttRect = butt.getBoundingClientRect();
            
            // 손가락과 엉덩이의 충돌 체크
            const fingerCenterX = fingerRect.left + fingerRect.width / 2;
            const buttCenterX = buttRect.left + buttRect.width / 2;
            const buttCenterY = buttRect.top + buttRect.height / 2;
            
            // 손가락이 엉덩이 범위 안에 있는지 확인
            const xDiff = Math.abs(fingerCenterX - buttCenterX);
            const yDiff = Math.abs(fingerRect.top - buttCenterY);
            
            // 충돌 조건: X축 차이가 30px 이하, Y축 차이가 50px 이하
            if (xDiff <= 30 && yDiff <= 50) {
                // 득점
                score++;
                scoreElement.textContent = score;
                
                // 득점 효과
                showMessage('득점!', '#4CAF50');
                createScoreEffect('+1', '#4CAF50', fingerRect.left + fingerRect.width / 2, fingerRect.top);
                
                // 엉덩이 색상 변화 (잠시 빨갛게)
                butt.style.backgroundColor = '#ff6666';
                setTimeout(() => {
                    butt.style.backgroundColor = '#ffcc99';
                }, 300);
                
                // 엉덩이 위치 재설정 (공격 성공 후 무작위 위치로 이동)
                const gameAreaWidth = gameArea.clientWidth;
                const buttWidth = butt.clientWidth;
                const randomX = Math.random() * (gameAreaWidth - buttWidth);
                butt.style.left = `${randomX}px`;
                
                // 공격 성공 시 속도 약간 증가
                buttSpeed += 0.1;
            } else {
                // 실점
                misses++;
                missesElement.textContent = misses;
                
                // 실점 효과
                showMessage('실점!', '#F44336');
                createScoreEffect('실점!', '#F44336', fingerRect.left + fingerRect.width / 2, fingerRect.top);
                
                // 공격 실패 시 속도 감소 (너무 어렵지 않도록)
                buttSpeed = Math.max(1, buttSpeed - 0.05);
            }
        }
        
        // 메시지 표시 함수
        function showMessage(text, color) {
            message.textContent = text;
            message.style.color = color;
            message.style.display = 'block';
            
            setTimeout(() => {
                message.style.display = 'none';
            }, 500);
        }
        
        // 득점/실점 효과 생성 함수
        function createScoreEffect(text, color, x, y) {
            const effect = document.createElement('div');
            effect.className = 'score-effect';
            effect.textContent = text;
            effect.style.color = color;
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            
            gameArea.appendChild(effect);
            
            // 효과 제거
            setTimeout(() => {
                effect.remove();
            }, 1000);
        }
        
        // 게임 타이머 함수
        function updateTimer() {
            if (!gameActive) return;
            
            timeLeft--;
            timeElement.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endGame();
            }
        }
        
        // 게임 종료 함수
        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            clearInterval(buttMoveTimer);
            
            // 최종 점수 표시
            finalScore.textContent = `${score}점`;
            finalScoreText.textContent = score;
            
            // 게임 오버 화면 표시
            setTimeout(() => {
                gameOverScreen.style.display = 'block';
            }, 1000);
        }
        
        // 게임 시작 함수
        function startGame() {
            // 변수 초기화
            score = 0;
            misses = 0;
            timeLeft = 30;
            gameActive = true;
            isJabbing = false;
            buttDirection = 1;
            buttSpeed = difficultySettings[currentDifficulty].speed;
            fingerPosition = 50;
            
            // UI 업데이트
            scoreElement.textContent = score;
            missesElement.textContent = misses;
            timeElement.textContent = timeLeft;
            gameOverScreen.style.display = 'none';
            
            // 엉덩이 초기 위치 설정
            const gameAreaWidth = gameArea.clientWidth;
            const buttWidth = butt.clientWidth;
            butt.style.left = `${gameAreaWidth / 2 - buttWidth / 2}px`;
            
            // 손가락 초기 위치 설정
            const fingerWidth = finger.clientWidth;
            const fingerLeft = (gameAreaWidth - fingerWidth) / 2;
            finger.style.left = `${fingerLeft}px`;
            
            // 타이머 시작
            gameTimer = setInterval(updateTimer, 1000);
            buttMoveTimer = setInterval(moveButt, 20);
        }
        
        // 난이도 설정 함수
        function setDifficulty(level) {
            currentDifficulty = level;
            buttSpeed = difficultySettings[level].speed;
            
            // 난이도 버튼 업데이트
            difficultyBtns.forEach(btn => {
                if (btn.dataset.level === level) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // 엉덩이 색상 변경 (난이도에 따라)
            butt.style.backgroundColor = difficultySettings[level].color;
            
            // 게임 중이면 즉시 적용
            if (gameActive) {
                showMessage(`난이도: ${level === 'easy' ? '쉬움' : level === 'normal' ? '보통' : '어려움'}`, difficultySettings[level].color);
            }
        }
        
        // 이벤트 리스너 설정
        leftBtn.addEventListener('click', () => moveFinger('left'));
        rightBtn.addEventListener('click', () => moveFinger('right'));
        jabBtn.addEventListener('click', jabFinger);
        
        restartBtn.addEventListener('click', startGame);
        
        // 난이도 버튼 이벤트
        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                setDifficulty(btn.dataset.level);
            });
        });
        
        // 키보드 이벤트
        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    moveFinger('left');
                    break;
                case 'ArrowRight':
                    moveFinger('right');
                    break;
                case ' ':
                case 'Spacebar':
                    e.preventDefault();
                    jabFinger();
                    break;
            }
        });
        
        // 게임 시작
        startGame();
        setDifficulty('normal');
    </script>
</body>
</html>